blueprint:
  name: Exterior Lights Power On
  description: Set the correct state/brightness/color for externior lights when powered on via the wall switch
  domain: automation
  input:
    action:
      name: daylight_scene
    action:
      name: evening_scene
    action:
      name: late_night_scene
    light_target:
      name: Light
      selector:
        target:
          entity:
            domain: light

variables:
  scene_to_activate: !input daylight_scene
  notification_service: notify.mobile_app_myshkin
    
trigger:
  platform: mqtt
  topic: homeassistant/bridge/log
  
condition: value_template: >-
  "{{ trigger.payload_json.type == 'device_announced' &&
  (trigger.payload_json.meta.friendly_name == 'Front Porch Light' ||
  trigger.payload_json.meta.friendly_name == 'Back Porch Light')  }}"

action:
  # Actions are scripts so can also be a list of actions
  - service: ""
    data:
      message: "Beautiful sunset!"
  - delay: 0:35
  - service: notify.notify
    data:
      message: {{ scene_to_activate }}
